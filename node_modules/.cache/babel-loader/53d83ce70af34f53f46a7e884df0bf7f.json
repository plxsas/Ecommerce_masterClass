{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{combineReducers}from'redux';import{setAlert}from'./alert';import{get_wishlist_items,get_wishlist_item_total,clear_wishlist}from'./wishlist';import{get_items,get_total,get_item_total,synch_cart}from'./cart';import{SIGNUP_SUCCESS,SIGNUP_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,GOOGLE_AUTH_SUCCESS,GOOGLE_AUTH_FAIL,FACEBOOK_AUTH_SUCCESS,FACEBOOK_AUTH_FAIL,AUTHENTICATED_SUCCESS,AUTHENTICATED_FAIL,RESET_PASSWORD_SUCCESS,RESET_PASSWORD_FAIL,RESET_PASSWORD_CONFIRM_SUCCESS,RESET_PASSWORD_CONFIRM_FAIL,REFRESH_SUCCESS,REFRESH_FAIL,SET_AUTH_LOADING,REMOVE_AUTH_LOADING,ACTIVATION_SUCCESS,ACTIVATION_FAIL,USER_LOADED_SUCCESS,USER_LOADED_FAIL,LOGOUT}from'./types';export var check_authenticated=function check_authenticated(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=15;break;}config={headers:{'Accept':'application/json','Content-Type':'application/json'}};body=JSON.stringify({token:localStorage.getItem('access')});_context.prev=3;_context.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/verify/\"),body,config);case 6:res=_context.sent;if(res.status===200){dispatch({type:AUTHENTICATED_SUCCESS});}else{dispatch({type:AUTHENTICATED_FAIL});}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);dispatch({type:AUTHENTICATED_FAIL});case 13:_context.next=16;break;case 15:dispatch({type:AUTHENTICATED_FAIL});case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var signup=function signup(first_name,last_name,email,password,re_password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({first_name:first_name,last_name:last_name,email:email,password:password,re_password:re_password});_context2.prev=3;_context2.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/\"),body,config);case 6:res=_context2.sent;if(res.status===201){dispatch({type:SIGNUP_SUCCESS,payload:res.data});dispatch(setAlert('We sent you an email, please activate your account','success'));}else{dispatch({type:SIGNUP_FAIL});dispatch(setAlert('Error creating account','danger'));}dispatch({type:REMOVE_AUTH_LOADING});_context2.next=16;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);dispatch({type:SIGNUP_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error creating account','danger'));case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var load_user=function load_user(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!localStorage.getItem('access')){_context3.next=14;break;}config={headers:{'Authorization':\"JWT \".concat(localStorage.getItem('access')),'Accept':'application/json'}};_context3.prev=2;_context3.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/me/\"),config);case 5:res=_context3.sent;if(res.status===200){dispatch({type:USER_LOADED_SUCCESS,payload:res.data});}else{dispatch({type:USER_LOADED_FAIL});}_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](2);dispatch({type:USER_LOADED_FAIL});case 12:_context3.next=15;break;case 14:dispatch({type:USER_LOADED_FAIL});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[2,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email,password:password});_context4.prev=3;_context4.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),body,config);case 6:res=_context4.sent;if(res.status===200){dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(load_user());dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Logged in successfully','success'));dispatch(synch_cart());dispatch(get_wishlist_items());dispatch(get_wishlist_item_total());}else{dispatch({type:LOGIN_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));}_context4.next=15;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);dispatch({type:LOGIN_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var google_authenticate=function google_authenticate(state,code){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(state&&code&&!localStorage.getItem('access'))){_context5.next=17;break;}dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/x-www-form-urlencoded'}};details={'state':state,'code':code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(details[key]);}).join('&');_context5.prev=5;_context5.next=8;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/google-oauth2/?\").concat(formBody),config);case 8:res=_context5.sent;if(res.status===201){dispatch({type:GOOGLE_AUTH_SUCCESS,payload:res.data});dispatch(load_user());dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Logged in successfully','success'));dispatch(synch_cart());dispatch(get_wishlist_items());dispatch(get_wishlist_item_total());}else{dispatch({type:GOOGLE_AUTH_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));}_context5.next=17;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](5);dispatch({type:GOOGLE_AUTH_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));case 17:case\"end\":return _context5.stop();}}},_callee5,null,[[5,12]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var facebook_authenticate=function facebook_authenticate(state,code){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(state&&code&&!localStorage.getItem('access'))){_context6.next=17;break;}dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/x-www-form-urlencoded'}};details={'state':state,'code':code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(details[key]);}).join('&');_context6.prev=5;_context6.next=8;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/facebook/?\").concat(formBody),config);case 8:res=_context6.sent;if(res.status===201){dispatch({type:FACEBOOK_AUTH_SUCCESS,payload:res.data});dispatch(load_user());dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Logged in successfully','success'));dispatch(synch_cart());dispatch(get_wishlist_items());dispatch(get_wishlist_item_total());}else{dispatch({type:FACEBOOK_AUTH_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));}_context6.next=17;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](5);dispatch({type:FACEBOOK_AUTH_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error authenticating','danger'));case 17:case\"end\":return _context6.stop();}}},_callee6,null,[[5,12]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var activate=function activate(uid,token){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token});_context7.prev=3;_context7.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/activation/\"),body,config);case 6:res=_context7.sent;if(res.status===204){dispatch({type:ACTIVATION_SUCCESS});dispatch(setAlert('Successfully activated your Account','success'));}else{dispatch({type:ACTIVATION_FAIL});dispatch(setAlert('Error activating account','danger'));}dispatch({type:REMOVE_AUTH_LOADING});_context7.next=16;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](3);dispatch({type:ACTIVATION_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error creating account','danger'));case 16:case\"end\":return _context7.stop();}}},_callee7,null,[[3,11]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var refresh=function refresh(){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!localStorage.getItem('refresh')){_context8.next=15;break;}config={headers:{'Accept':'application/json','Content-Type':'application/json'}};body=JSON.stringify({refresh:localStorage.getItem('refresh')});_context8.prev=3;_context8.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/refresh/\"),body,config);case 6:res=_context8.sent;if(res.status===200){dispatch({type:REFRESH_SUCCESS,payload:res.data});}else{dispatch({type:REFRESH_FAIL});}_context8.next=13;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](3);dispatch({type:REFRESH_FAIL});case 13:_context8.next=16;break;case 15:dispatch({type:REFRESH_FAIL});case 16:case\"end\":return _context8.stop();}}},_callee8,null,[[3,10]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var reset_password=function reset_password(email){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email});_context9.prev=3;_context9.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password/\"),body,config);case 6:res=_context9.sent;if(res.status===200){dispatch({type:RESET_PASSWORD_SUCCESS});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Password reset email sent','success'));}else{dispatch({type:RESET_PASSWORD_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error sending password reset email','danger'));}_context9.next=15;break;case 10:_context9.prev=10;_context9.t0=_context9[\"catch\"](3);dispatch({type:RESET_PASSWORD_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error sending password reset email','danger'));case 15:case\"end\":return _context9.stop();}}},_callee9,null,[[3,10]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};export var reset_password_confirm=function reset_password_confirm(uid,token,new_password,re_new_password){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:dispatch({type:SET_AUTH_LOADING});config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token,new_password:new_password,re_new_password:re_new_password});if(!(new_password!==re_new_password)){_context10.next=9;break;}dispatch({type:RESET_PASSWORD_CONFIRM_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Passwords do not match','danger'));_context10.next=22;break;case 9:_context10.prev=9;_context10.next=12;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password_confirm/\"),body,config);case 12:res=_context10.sent;if(res.status===200){dispatch({type:RESET_PASSWORD_CONFIRM_SUCCESS});dispatch({type:REMOVE_AUTH_LOADING});}else{dispatch({type:RESET_PASSWORD_CONFIRM_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error resetting your password','danger'));}dispatch(setAlert('Password has been reset successfully','success'));_context10.next=22;break;case 17:_context10.prev=17;_context10.t0=_context10[\"catch\"](9);dispatch({type:RESET_PASSWORD_CONFIRM_FAIL});dispatch({type:REMOVE_AUTH_LOADING});dispatch(setAlert('Error resetting your password','danger'));case 22:case\"end\":return _context10.stop();}}},_callee10,null,[[9,17]]);}));return function(_x10){return _ref10.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT});dispatch(setAlert('Logout Out','success'));dispatch(get_items());dispatch(get_item_total());dispatch(get_total());dispatch(clear_wishlist());};};","map":{"version":3,"sources":["C:/Users/sale1/Desktop/SHOPTIME/src/actions/auth.js"],"names":["axios","combineReducers","setAlert","get_wishlist_items","get_wishlist_item_total","clear_wishlist","get_items","get_total","get_item_total","synch_cart","SIGNUP_SUCCESS","SIGNUP_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","GOOGLE_AUTH_SUCCESS","GOOGLE_AUTH_FAIL","FACEBOOK_AUTH_SUCCESS","FACEBOOK_AUTH_FAIL","AUTHENTICATED_SUCCESS","AUTHENTICATED_FAIL","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAIL","RESET_PASSWORD_CONFIRM_SUCCESS","RESET_PASSWORD_CONFIRM_FAIL","REFRESH_SUCCESS","REFRESH_FAIL","SET_AUTH_LOADING","REMOVE_AUTH_LOADING","ACTIVATION_SUCCESS","ACTIVATION_FAIL","USER_LOADED_SUCCESS","USER_LOADED_FAIL","LOGOUT","check_authenticated","dispatch","localStorage","getItem","config","headers","body","JSON","stringify","token","post","process","env","REACT_APP_API_URL","res","status","type","signup","first_name","last_name","email","password","re_password","payload","data","load_user","get","login","google_authenticate","state","code","details","formBody","Object","keys","map","key","encodeURIComponent","join","facebook_authenticate","activate","uid","refresh","reset_password","reset_password_confirm","new_password","re_new_password","logout"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { combineReducers } from 'redux';\r\nimport { setAlert } from './alert';\r\nimport {\r\n    get_wishlist_items,\r\n    get_wishlist_item_total,\r\n    clear_wishlist,\r\n} from './wishlist';\r\nimport {\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n    synch_cart\r\n} from './cart';\r\nimport {\r\n    SIGNUP_SUCCESS,\r\n    SIGNUP_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    GOOGLE_AUTH_SUCCESS,\r\n    GOOGLE_AUTH_FAIL,\r\n    FACEBOOK_AUTH_SUCCESS,\r\n    FACEBOOK_AUTH_FAIL,\r\n    AUTHENTICATED_SUCCESS,\r\n    AUTHENTICATED_FAIL,\r\n    RESET_PASSWORD_SUCCESS,\r\n    RESET_PASSWORD_FAIL,\r\n    RESET_PASSWORD_CONFIRM_SUCCESS,\r\n    RESET_PASSWORD_CONFIRM_FAIL,\r\n    REFRESH_SUCCESS,\r\n    REFRESH_FAIL,\r\n    SET_AUTH_LOADING,\r\n    REMOVE_AUTH_LOADING,\r\n    ACTIVATION_SUCCESS,\r\n    ACTIVATION_FAIL,\r\n    USER_LOADED_SUCCESS,\r\n    USER_LOADED_FAIL,\r\n    LOGOUT,\r\n} from './types';\r\n\r\nexport const check_authenticated = () => async dispatch => {\r\n    if (localStorage.getItem('access')) {\r\n        const config = {\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        };\r\n\r\n        const body = JSON.stringify({\r\n            token: localStorage.getItem('access')\r\n        });\r\n\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/verify/`, body, config);\r\n\r\n            if (res.status === 200) {\r\n                dispatch({\r\n                    type: AUTHENTICATED_SUCCESS\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: AUTHENTICATED_FAIL\r\n                });\r\n            }\r\n        } catch (err) {\r\n            dispatch({\r\n                type: AUTHENTICATED_FAIL\r\n            });\r\n        }\r\n    } else {\r\n        dispatch({\r\n            type: AUTHENTICATED_FAIL\r\n        });\r\n    }\r\n};\r\n\r\nexport const signup = (first_name, last_name, email, password, re_password) => async dispatch => {\r\n    dispatch({\r\n        type: SET_AUTH_LOADING\r\n    });\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        first_name,\r\n        last_name,\r\n        email,\r\n        password,\r\n        re_password,\r\n    });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/`, body, config);\r\n\r\n        if (res.status === 201) {\r\n            dispatch({\r\n                type: SIGNUP_SUCCESS,\r\n                payload: res.data\r\n            });\r\n            dispatch(setAlert('We sent you an email, please activate your account', 'success'));\r\n        } else {\r\n            dispatch({\r\n                type: SIGNUP_FAIL\r\n            });\r\n            dispatch(setAlert('Error creating account', 'danger'));\r\n        }\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: SIGNUP_FAIL\r\n        });\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n        dispatch(setAlert('Error creating account', 'danger'));\r\n    }\r\n};\r\n\r\nexport const load_user = () => async dispatch => {\r\n    if (localStorage.getItem('access')) {\r\n        const config = {\r\n            headers: {\r\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\r\n                'Accept': 'application/json'\r\n            }\r\n        };\r\n\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/auth/users/me/`, config);\r\n\r\n            if (res.status === 200) {\r\n                dispatch({\r\n                    type: USER_LOADED_SUCCESS,\r\n                    payload: res.data\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: USER_LOADED_FAIL\r\n                });\r\n            }\r\n        } catch (err) {\r\n            dispatch({\r\n                type: USER_LOADED_FAIL\r\n            });\r\n        }\r\n    } else {\r\n        dispatch({\r\n            type: USER_LOADED_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\nexport const login = (email, password) => async dispatch => {\r\n    dispatch({\r\n        type: SET_AUTH_LOADING\r\n    });\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        email,\r\n        password\r\n    });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/create/`, body, config);\r\n\r\n        if (res.status === 200) {\r\n            dispatch({\r\n                type: LOGIN_SUCCESS,\r\n                payload: res.data\r\n            });\r\n            dispatch(load_user());\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Logged in successfully', 'success'));\r\n            dispatch(synch_cart());\r\n            dispatch(get_wishlist_items());\r\n            dispatch(get_wishlist_item_total());\r\n        } else {\r\n            dispatch({\r\n                type: LOGIN_FAIL,\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Error authenticating', 'danger'));\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL\r\n        });\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n        dispatch(setAlert('Error authenticating', 'danger'));\r\n\r\n    }\r\n};\r\n\r\n\r\nexport const google_authenticate = (state, code) => async dispatch => {\r\n    if (state && code && !localStorage.getItem('access')) {\r\n        dispatch({\r\n            type: SET_AUTH_LOADING\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        };\r\n\r\n        const details = {\r\n            'state': state,\r\n            'code': code\r\n        };\r\n\r\n        const formBody = Object.keys(details).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(details[key])).join('&');\r\n\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/o/google-oauth2/?${formBody}`, config);\r\n\r\n            if (res.status === 201) {\r\n                dispatch({\r\n                    type: GOOGLE_AUTH_SUCCESS,\r\n                    payload: res.data\r\n                });\r\n                dispatch(load_user());\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n                dispatch(setAlert('Logged in successfully', 'success'));\r\n                dispatch(synch_cart());\r\n                dispatch(get_wishlist_items());\r\n                dispatch(get_wishlist_item_total());\r\n            } else {\r\n                dispatch({\r\n                    type: GOOGLE_AUTH_FAIL\r\n                });\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n                dispatch(setAlert('Error authenticating', 'danger'));\r\n            }\r\n        } catch (err) {\r\n            dispatch({\r\n                type: GOOGLE_AUTH_FAIL\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Error authenticating', 'danger'));\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const facebook_authenticate = (state, code) => async dispatch => {\r\n    if (state && code && !localStorage.getItem('access')) {\r\n        dispatch({\r\n            type: SET_AUTH_LOADING\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            }\r\n        };\r\n\r\n        const details = {\r\n            'state': state,\r\n            'code': code\r\n        };\r\n\r\n        const formBody = Object.keys(details).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(details[key])).join('&');\r\n\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/o/facebook/?${formBody}`, config);\r\n\r\n            if (res.status === 201) {\r\n                dispatch({\r\n                    type: FACEBOOK_AUTH_SUCCESS,\r\n                    payload: res.data\r\n                });\r\n                dispatch(load_user());\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n                dispatch(setAlert('Logged in successfully', 'success'));\r\n                dispatch(synch_cart());\r\n                dispatch(get_wishlist_items());\r\n                dispatch(get_wishlist_item_total());\r\n            } else {\r\n                dispatch({\r\n                    type: FACEBOOK_AUTH_FAIL\r\n                });\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n                dispatch(setAlert('Error authenticating', 'danger'));\r\n            }\r\n        } catch (err) {\r\n            dispatch({\r\n                type: FACEBOOK_AUTH_FAIL\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Error authenticating', 'danger'));\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport const activate = (uid, token) => async dispatch => {\r\n    dispatch({\r\n        type: SET_AUTH_LOADING\r\n    });\r\n\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        uid,\r\n        token\r\n    });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/activation/`, body, config);\r\n\r\n        if (res.status === 204) {\r\n            dispatch({\r\n                type: ACTIVATION_SUCCESS\r\n            });\r\n            dispatch(setAlert('Successfully activated your Account', 'success'));\r\n        } else {\r\n            dispatch({\r\n                type: ACTIVATION_FAIL\r\n            });\r\n            dispatch(setAlert('Error activating account', 'danger'));\r\n        }\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: ACTIVATION_FAIL\r\n        });\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n        dispatch(setAlert('Error creating account', 'danger'));\r\n    }\r\n};\r\n\r\nexport const refresh = () => async dispatch => {\r\n    if (localStorage.getItem('refresh')) {\r\n        const config = {\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        };\r\n\r\n        const body = JSON.stringify({\r\n            refresh: localStorage.getItem('refresh')\r\n        });\r\n\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/refresh/`, body, config);\r\n\r\n            if (res.status === 200) {\r\n                dispatch({\r\n                    type: REFRESH_SUCCESS,\r\n                    payload: res.data\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: REFRESH_FAIL\r\n                });\r\n            }\r\n        } catch (err) {\r\n            dispatch({\r\n                type: REFRESH_FAIL\r\n            });\r\n        }\r\n    } else {\r\n        dispatch({\r\n            type: REFRESH_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\nexport const reset_password = (email) => async dispatch => {\r\n    dispatch({\r\n        type: SET_AUTH_LOADING\r\n    });\r\n\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ email });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/reset_password/`, body, config);\r\n        if (res.status === 200) {\r\n            dispatch({\r\n                type: RESET_PASSWORD_SUCCESS\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Password reset email sent', 'success'));\r\n        } else {\r\n            dispatch({\r\n                type: RESET_PASSWORD_FAIL\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Error sending password reset email', 'danger'));\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_FAIL\r\n        });\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n        dispatch(setAlert('Error sending password reset email', 'danger'));\r\n    }\r\n};\r\n\r\nexport const reset_password_confirm = (uid, token, new_password, re_new_password) => async dispatch => {\r\n    dispatch({\r\n        type: SET_AUTH_LOADING\r\n    });\r\n\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        uid,\r\n        token,\r\n        new_password,\r\n        re_new_password\r\n    });\r\n\r\n    if (new_password !== re_new_password) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_CONFIRM_FAIL\r\n        });\r\n        dispatch({\r\n            type: REMOVE_AUTH_LOADING\r\n        });\r\n        dispatch(setAlert('Passwords do not match', 'danger'));\r\n    } else {\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/reset_password_confirm/`, body, config);\r\n\r\n            if (res.status === 200) {\r\n                dispatch({\r\n                    type: RESET_PASSWORD_CONFIRM_SUCCESS\r\n                });\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: RESET_PASSWORD_CONFIRM_FAIL\r\n                });\r\n                dispatch({\r\n                    type: REMOVE_AUTH_LOADING\r\n                });\r\n                dispatch(setAlert('Error resetting your password', 'danger'));\r\n            }\r\n            dispatch(setAlert('Password has been reset successfully', 'success'));\r\n        } catch (err) {\r\n            dispatch({\r\n                type: RESET_PASSWORD_CONFIRM_FAIL\r\n            });\r\n            dispatch({\r\n                type: REMOVE_AUTH_LOADING\r\n            });\r\n            dispatch(setAlert('Error resetting your password', 'danger'));\r\n        }\r\n    }\r\n};\r\n\r\nexport const logout = () => dispatch => {\r\n    dispatch({\r\n        type: LOGOUT\r\n    });\r\n    dispatch(setAlert('Logout Out', 'success'));\r\n    dispatch(get_items());\r\n    dispatch(get_item_total());\r\n    dispatch(get_total());\r\n    dispatch(clear_wishlist());\r\n};"]},"metadata":{},"sourceType":"module"}