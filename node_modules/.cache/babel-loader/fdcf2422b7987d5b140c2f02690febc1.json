{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Helmet}from\"react-helmet\";import{Redirect}from'react-router-dom';import{connect}from'react-redux';import{get_product,get_related_products}from'../actions/products';import{add_item,get_items,get_total,get_item_total}from'../actions/cart';import{get_wishlist_items,get_wishlist_item_total,add_wishlist_item,remove_wishlist_item}from'../actions/wishlist';import{get_reviews,get_review,create_review,update_review,delete_review,filter_reviews}from'../actions/reviews';import Card from'../components/Card';import ProductDetailCard from'../components/ProductDetailCard';import LeaveReview from'../components/LeaveReview';import Reviews from'../components/Reviews';import Stars from'../components/Stars';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetail=function ProductDetail(_ref){var match=_ref.match,product=_ref.product,get_product=_ref.get_product,related_products=_ref.related_products,get_related_products=_ref.get_related_products,add_item=_ref.add_item,get_items=_ref.get_items,get_total=_ref.get_total,get_item_total=_ref.get_item_total,wishlist=_ref.wishlist,get_wishlist_items=_ref.get_wishlist_items,get_wishlist_item_total=_ref.get_wishlist_item_total,add_wishlist_item=_ref.add_wishlist_item,remove_wishlist_item=_ref.remove_wishlist_item,isAuthenticated=_ref.isAuthenticated,review=_ref.review,reviews=_ref.reviews,get_reviews=_ref.get_reviews,get_review=_ref.get_review,create_review=_ref.create_review,update_review=_ref.update_review,delete_review=_ref.delete_review,filter_reviews=_ref.filter_reviews;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginRedirect=_useState2[0],setLoginRedirect=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];var _useState5=useState({comment:''}),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];var _useState7=useState(5.0),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var comment=formData.comment;useEffect(function(){if(isAuthenticated!==null&&isAuthenticated!==undefined){if(isAuthenticated&&review&&review!==null&&review!==undefined&&review.comment&&review.comment!==null&&review.comment!==undefined){setFormData({comment:review.comment});}else{setFormData({comment:''});}}},[review,isAuthenticated]);useEffect(function(){window.scrollTo(0,0);var productId=match.params.id;get_product(productId);get_related_products(productId);},[match.params.id]);useEffect(function(){var productId=match.params.id;get_reviews(productId);},[match.params.id]);useEffect(function(){var productId=match.params.id;get_review(productId);},[match.params.id,isAuthenticated]);var onChange=function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var requireLogin=function requireLogin(e){e.preventDefault();setLoginRedirect(true);};var leaveReview=function leaveReview(e){e.preventDefault();var productId=match.params.id;if(rating!==null)create_review(productId,rating,comment);};var updateReview=function updateReview(e){e.preventDefault();var productId=match.params.id;if(rating!==null)update_review(productId,rating,comment);};var deleteReview=function deleteReview(){var productId=match.params.id;var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return delete_review(productId);case 2:_context.next=4;return get_review(productId);case 4:setFormData({comment:''});case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();};var filterReviews=function filterReviews(numStars){var productId=match.params.id;filter_reviews(productId,numStars);};var getReviews=function getReviews(){var productId=match.params.id;get_reviews(productId);};var getRelatedProducts=function getRelatedProducts(){if(related_products&&related_products!==null&&related_products!==undefined&&related_products.length!==0){return related_products.map(function(product,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(Card,{product:product,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,wishlist:wishlist,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total,add_wishlist_item:add_wishlist_item,remove_wishlist_item:remove_wishlist_item,isAuthenticated:isAuthenticated,setLoginRedirect:setLoginRedirect,setRedirect:setRedirect})},index);});}};var getLeaveReviewComponent=function getLeaveReviewComponent(){if(isAuthenticated){if(review&&review!==null&&review!==undefined&&Object.keys(review).length===0){return/*#__PURE__*/_jsx(LeaveReview,{review:review,rating:rating,setRating:setRating,onSubmit:leaveReview,onChange:onChange,comment:comment});}else if(review&&review!==null&&review!==undefined&&Object.keys(review).length!==0){return/*#__PURE__*/_jsx(LeaveReview,{review:review,rating:rating,setRating:setRating,onSubmit:updateReview,onChange:onChange,comment:comment,deleteReview:deleteReview});}}else{return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:requireLogin,children:\"Login to Leave a Review\"});}};if(loginRedirect)return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});if(redirect)return/*#__PURE__*/_jsx(Redirect,{to:\"/cart-or-continue-shopping\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Helmet application\"}),/*#__PURE__*/_jsxs(\"title\",{children:[\"Shop Time | Product Detail - \",\"\".concat(product&&product!==null&&product!==undefined&&product.name&&product.name!==null&&product.name!==undefined?product.name:'')]})]}),/*#__PURE__*/_jsx(ProductDetailCard,{product:product,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,setRedirect:setRedirect,isAuthenticated:isAuthenticated,setLoginRedirect:setLoginRedirect,add_wishlist_item:add_wishlist_item,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"section\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5\",children:\"Related Products:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 ml-5 mr-5\",children:getRelatedProducts()})]}),/*#__PURE__*/_jsx(\"section\",{className:\"mt-5 mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-3\",children:\"Filter Reviews\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm mb-3\",onClick:getReviews,children:\"All\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",style:{cursor:'pointer'},onClick:function onClick(){return filterReviews(5);},children:/*#__PURE__*/_jsx(Stars,{rating:5.0})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",style:{cursor:'pointer'},onClick:function onClick(){return filterReviews(4);},children:/*#__PURE__*/_jsx(Stars,{rating:4.0})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",style:{cursor:'pointer'},onClick:function onClick(){return filterReviews(3);},children:/*#__PURE__*/_jsx(Stars,{rating:3.0})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",style:{cursor:'pointer'},onClick:function onClick(){return filterReviews(2);},children:/*#__PURE__*/_jsx(Stars,{rating:2.0})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",style:{cursor:'pointer'},onClick:function onClick(){return filterReviews(1);},children:/*#__PURE__*/_jsx(Stars,{rating:1.0})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Leave a Review:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-3\",children:\"Share your thoughts with other customers\"}),getLeaveReviewComponent()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-7 offset-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-5\",children:\"Customer Reviews\"}),/*#__PURE__*/_jsx(Reviews,{reviews:reviews})]})]})})]});};var mapStateToProps=function mapStateToProps(state){return{product:state.products.product,related_products:state.products.related_products,wishlist:state.wishlist.items,isAuthenticated:state.auth.isAuthenticated,review:state.reviews.review,reviews:state.reviews.reviews};};export default connect(mapStateToProps,{get_product:get_product,get_related_products:get_related_products,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total,add_wishlist_item:add_wishlist_item,remove_wishlist_item:remove_wishlist_item,get_reviews:get_reviews,get_review:get_review,create_review:create_review,update_review:update_review,delete_review:delete_review,filter_reviews:filter_reviews})(ProductDetail);","map":{"version":3,"sources":["C:/Users/sale1/Desktop/SHOPTIME/src/containers/ProductDetail.js"],"names":["React","useState","useEffect","Helmet","Redirect","connect","get_product","get_related_products","add_item","get_items","get_total","get_item_total","get_wishlist_items","get_wishlist_item_total","add_wishlist_item","remove_wishlist_item","get_reviews","get_review","create_review","update_review","delete_review","filter_reviews","Card","ProductDetailCard","LeaveReview","Reviews","Stars","ProductDetail","match","product","related_products","wishlist","isAuthenticated","review","reviews","loginRedirect","setLoginRedirect","redirect","setRedirect","comment","formData","setFormData","rating","setRating","undefined","window","scrollTo","productId","params","id","onChange","e","target","name","value","requireLogin","preventDefault","leaveReview","updateReview","deleteReview","fetchData","filterReviews","numStars","getReviews","getRelatedProducts","length","map","index","getLeaveReviewComponent","Object","keys","cursor","mapStateToProps","state","products","items","auth"],"mappings":"4uBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OACIC,WADJ,CAEIC,oBAFJ,KAGO,qBAHP,CAIA,OACIC,QADJ,CAEIC,SAFJ,CAGIC,SAHJ,CAIIC,cAJJ,KAKO,iBALP,CAMA,OACIC,kBADJ,CAEIC,uBAFJ,CAGIC,iBAHJ,CAIIC,oBAJJ,KAKO,qBALP,CAMA,OACIC,WADJ,CAEIC,UAFJ,CAGIC,aAHJ,CAIIC,aAJJ,CAKIC,aALJ,CAMIC,cANJ,KAOO,oBAPP,CAQA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,iCAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAwBhB,IAvBFC,CAAAA,KAuBE,MAvBFA,KAuBE,CAtBFC,OAsBE,MAtBFA,OAsBE,CArBFvB,WAqBE,MArBFA,WAqBE,CApBFwB,gBAoBE,MApBFA,gBAoBE,CAnBFvB,oBAmBE,MAnBFA,oBAmBE,CAlBFC,QAkBE,MAlBFA,QAkBE,CAjBFC,SAiBE,MAjBFA,SAiBE,CAhBFC,SAgBE,MAhBFA,SAgBE,CAfFC,cAeE,MAfFA,cAeE,CAdFoB,QAcE,MAdFA,QAcE,CAbFnB,kBAaE,MAbFA,kBAaE,CAZFC,uBAYE,MAZFA,uBAYE,CAXFC,iBAWE,MAXFA,iBAWE,CAVFC,oBAUE,MAVFA,oBAUE,CATFiB,eASE,MATFA,eASE,CARFC,MAQE,MARFA,MAQE,CAPFC,OAOE,MAPFA,OAOE,CANFlB,WAME,MANFA,WAME,CALFC,UAKE,MALFA,UAKE,CAJFC,aAIE,MAJFA,aAIE,CAHFC,aAGE,MAHFA,aAGE,CAFFC,aAEE,MAFFA,aAEE,CADFC,cACE,MADFA,cACE,CACF,cAA0CpB,QAAQ,CAAC,KAAD,CAAlD,wCAAOkC,aAAP,eAAsBC,gBAAtB,eACA,eAAgCnC,QAAQ,CAAC,KAAD,CAAxC,yCAAOoC,QAAP,eAAiBC,WAAjB,eAEA,eAAgCrC,QAAQ,CAAC,CACrCsC,OAAO,CAAE,EAD4B,CAAD,CAAxC,yCAAOC,QAAP,eAAiBC,WAAjB,eAGA,eAA4BxC,QAAQ,CAAC,GAAD,CAApC,yCAAOyC,MAAP,eAAeC,SAAf,eAEA,GAAQJ,CAAAA,OAAR,CAAoBC,QAApB,CAAQD,OAAR,CAEArC,SAAS,CAAC,UAAM,CACZ,GACI8B,eAAe,GAAK,IAApB,EACAA,eAAe,GAAKY,SAFxB,CAGE,CACE,GACIZ,eAAe,EACfC,MADA,EAEAA,MAAM,GAAK,IAFX,EAGAA,MAAM,GAAKW,SAHX,EAIAX,MAAM,CAACM,OAJP,EAKAN,MAAM,CAACM,OAAP,GAAmB,IALnB,EAMAN,MAAM,CAACM,OAAP,GAAmBK,SAPvB,CAQE,CACEH,WAAW,CAAC,CACRF,OAAO,CAAEN,MAAM,CAACM,OADR,CAAD,CAAX,CAGH,CAZD,IAYO,CACHE,WAAW,CAAC,CACRF,OAAO,CAAE,EADD,CAAD,CAAX,CAGH,CACJ,CACJ,CAvBQ,CAuBN,CAACN,MAAD,CAASD,eAAT,CAvBM,CAAT,CAyBA9B,SAAS,CAAC,UAAM,CACZ2C,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACA,GAAMC,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEA3C,WAAW,CAACyC,SAAD,CAAX,CACAxC,oBAAoB,CAACwC,SAAD,CAApB,CACH,CANQ,CAMN,CAACnB,KAAK,CAACoB,MAAN,CAAaC,EAAd,CANM,CAAT,CAQA/C,SAAS,CAAC,UAAM,CACZ,GAAM6C,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEAjC,WAAW,CAAC+B,SAAD,CAAX,CACH,CAJQ,CAIN,CAACnB,KAAK,CAACoB,MAAN,CAAaC,EAAd,CAJM,CAAT,CAMA/C,SAAS,CAAC,UAAM,CACZ,GAAM6C,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEAhC,UAAU,CAAC8B,SAAD,CAAV,CACH,CAJQ,CAIN,CAACnB,KAAK,CAACoB,MAAN,CAAaC,EAAd,CAAkBjB,eAAlB,CAJM,CAAT,CAMA,GAAMkB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,QAAIV,CAAAA,WAAW,gCAAMD,QAAN,wBAAiBW,CAAC,CAACC,MAAF,CAASC,IAA1B,CAAiCF,CAAC,CAACC,MAAF,CAASE,KAA1C,GAAf,EAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAJ,CAAC,CAAI,CACtBA,CAAC,CAACK,cAAF,GAEApB,gBAAgB,CAAC,IAAD,CAAhB,CACH,CAJD,CAMA,GAAMqB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAN,CAAC,CAAI,CACrBA,CAAC,CAACK,cAAF,GAEA,GAAMT,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEA,GAAIP,MAAM,GAAK,IAAf,CACIxB,aAAa,CAAC6B,SAAD,CAAYL,MAAZ,CAAoBH,OAApB,CAAb,CACP,CAPD,CASA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAP,CAAC,CAAI,CACtBA,CAAC,CAACK,cAAF,GAEA,GAAMT,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEA,GAAIP,MAAM,GAAK,IAAf,CACIvB,aAAa,CAAC4B,SAAD,CAAYL,MAAZ,CAAoBH,OAApB,CAAb,CACP,CAPD,CASA,GAAMoB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMZ,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEA,GAAMW,CAAAA,SAAS,2FAAG,yJACRxC,CAAAA,aAAa,CAAC2B,SAAD,CADL,8BAER9B,CAAAA,UAAU,CAAC8B,SAAD,CAFF,QAGdN,WAAW,CAAC,CACRF,OAAO,CAAE,EADD,CAAD,CAAX,CAHc,sDAAH,kBAATqB,CAAAA,SAAS,2CAAf,CAQAA,SAAS,GACZ,CAZD,CAcA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,QAAQ,CAAI,CAC9B,GAAMf,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEA5B,cAAc,CAAC0B,SAAD,CAAYe,QAAZ,CAAd,CACH,CAJD,CAMA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAMhB,CAAAA,SAAS,CAAGnB,KAAK,CAACoB,MAAN,CAAaC,EAA/B,CAEAjC,WAAW,CAAC+B,SAAD,CAAX,CACH,CAJD,CAMA,GAAMiB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC7B,GACIlC,gBAAgB,EAChBA,gBAAgB,GAAK,IADrB,EAEAA,gBAAgB,GAAKc,SAFrB,EAGAd,gBAAgB,CAACmC,MAAjB,GAA4B,CAJhC,CAKE,CACE,MAAOnC,CAAAA,gBAAgB,CAACoC,GAAjB,CAAqB,SAACrC,OAAD,CAAUsC,KAAV,qBACxB,YAAiB,SAAS,CAAC,OAA3B,uBACI,KAAC,IAAD,EACI,OAAO,CAAEtC,OADb,CAEI,QAAQ,CAAErB,QAFd,CAGI,SAAS,CAAEC,SAHf,CAII,SAAS,CAAEC,SAJf,CAKI,cAAc,CAAEC,cALpB,CAMI,QAAQ,CAAEoB,QANd,CAOI,kBAAkB,CAAEnB,kBAPxB,CAQI,uBAAuB,CAAEC,uBAR7B,CASI,iBAAiB,CAAEC,iBATvB,CAUI,oBAAoB,CAAEC,oBAV1B,CAWI,eAAe,CAAEiB,eAXrB,CAYI,gBAAgB,CAAEI,gBAZtB,CAaI,WAAW,CAAEE,WAbjB,EADJ,EAAU6B,KAAV,CADwB,EAArB,CAAP,CAmBH,CACJ,CA3BD,CA6BA,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,EAAM,CAClC,GAAIpC,eAAJ,CAAqB,CACjB,GACIC,MAAM,EACNA,MAAM,GAAK,IADX,EAEAA,MAAM,GAAKW,SAFX,EAGAyB,MAAM,CAACC,IAAP,CAAYrC,MAAZ,EAAoBgC,MAApB,GAA+B,CAJnC,CAKE,CACE,mBACI,KAAC,WAAD,EACI,MAAM,CAAEhC,MADZ,CAEI,MAAM,CAAES,MAFZ,CAGI,SAAS,CAAEC,SAHf,CAII,QAAQ,CAAEc,WAJd,CAKI,QAAQ,CAAEP,QALd,CAMI,OAAO,CAAEX,OANb,EADJ,CAUH,CAhBD,IAiBK,IACDN,MAAM,EACNA,MAAM,GAAK,IADX,EAEAA,MAAM,GAAKW,SAFX,EAGAyB,MAAM,CAACC,IAAP,CAAYrC,MAAZ,EAAoBgC,MAApB,GAA+B,CAJ9B,CAKH,CACE,mBACI,KAAC,WAAD,EACI,MAAM,CAAEhC,MADZ,CAEI,MAAM,CAAES,MAFZ,CAGI,SAAS,CAAEC,SAHf,CAII,QAAQ,CAAEe,YAJd,CAKI,QAAQ,CAAER,QALd,CAMI,OAAO,CAAEX,OANb,CAOI,YAAY,CAAEoB,YAPlB,EADJ,CAWH,CACJ,CApCD,IAoCO,CACH,mBACI,eACI,SAAS,CAAC,iBADd,CAEI,OAAO,CAAEJ,YAFb,qCADJ,CAQH,CACJ,CA/CD,CAiDA,GAAIpB,aAAJ,CACI,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACJ,GAAIE,QAAJ,CACI,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,4BAAb,EAAP,CAEJ,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,MAAC,MAAD,yBACI,aAAM,OAAO,CAAC,OAAd,EADJ,cAEI,aAAM,IAAI,CAAC,aAAX,CAAyB,OAAO,CAAC,oBAAjC,EAFJ,cAGI,mEACIR,OAAO,EACPA,OAAO,GAAK,IADZ,EAEAA,OAAO,GAAKe,SAFZ,EAGAf,OAAO,CAACwB,IAHR,EAIAxB,OAAO,CAACwB,IAAR,GAAiB,IAJjB,EAKAxB,OAAO,CAACwB,IAAR,GAAiBT,SALjB,CAK6Bf,OAAO,CAACwB,IALrC,CAK4C,EANhD,IAHJ,GADJ,cAcI,KAAC,iBAAD,EACI,OAAO,CAAExB,OADb,CAEI,QAAQ,CAAErB,QAFd,CAGI,SAAS,CAAEC,SAHf,CAII,SAAS,CAAEC,SAJf,CAKI,cAAc,CAAEC,cALpB,CAMI,WAAW,CAAE2B,WANjB,CAOI,eAAe,CAAEN,eAPrB,CAQI,gBAAgB,CAAEI,gBARtB,CASI,iBAAiB,CAAEtB,iBATvB,CAUI,kBAAkB,CAAEF,kBAVxB,CAWI,uBAAuB,CAAEC,uBAX7B,EAdJ,cA4BI,aA5BJ,cA8BI,iBAAS,SAAS,CAAC,MAAnB,wBACI,WAAI,SAAS,CAAC,MAAd,+BADJ,cAEI,YAAK,SAAS,CAAC,oBAAf,UACKmD,kBAAkB,EADvB,EAFJ,GA9BJ,cAqCI,gBAAS,SAAS,CAAC,WAAnB,uBACI,aAAK,SAAS,CAAC,KAAf,wBACI,aAAK,SAAS,CAAC,OAAf,wBACI,WAAI,SAAS,CAAC,MAAd,4BADJ,cAEI,eACI,SAAS,CAAC,6BADd,CAEI,OAAO,CAAED,UAFb,iBAFJ,cAQI,YACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAE,CAAEQ,MAAM,CAAE,SAAV,CAFX,CAGI,OAAO,CAAE,yBAAMV,CAAAA,aAAa,CAAC,CAAD,CAAnB,EAHb,uBAKI,KAAC,KAAD,EAAO,MAAM,CAAE,GAAf,EALJ,EARJ,cAeI,YACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAE,CAAEU,MAAM,CAAE,SAAV,CAFX,CAGI,OAAO,CAAE,yBAAMV,CAAAA,aAAa,CAAC,CAAD,CAAnB,EAHb,uBAKI,KAAC,KAAD,EAAO,MAAM,CAAE,GAAf,EALJ,EAfJ,cAsBI,YACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAE,CAAEU,MAAM,CAAE,SAAV,CAFX,CAGI,OAAO,CAAE,yBAAMV,CAAAA,aAAa,CAAC,CAAD,CAAnB,EAHb,uBAKI,KAAC,KAAD,EAAO,MAAM,CAAE,GAAf,EALJ,EAtBJ,cA6BI,YACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAE,CAAEU,MAAM,CAAE,SAAV,CAFX,CAGI,OAAO,CAAE,yBAAMV,CAAAA,aAAa,CAAC,CAAD,CAAnB,EAHb,uBAKI,KAAC,KAAD,EAAO,MAAM,CAAE,GAAf,EALJ,EA7BJ,cAoCI,YACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAE,CAAEU,MAAM,CAAE,SAAV,CAFX,CAGI,OAAO,CAAE,yBAAMV,CAAAA,aAAa,CAAC,CAAD,CAAnB,EAHb,uBAKI,KAAC,KAAD,EAAO,MAAM,CAAE,GAAf,EALJ,EApCJ,cA4CI,uCA5CJ,cA6CI,UAAG,SAAS,CAAC,MAAb,sDA7CJ,CAgDKO,uBAAuB,EAhD5B,GADJ,cAmDI,aAAK,SAAS,CAAC,gBAAf,wBACI,WAAI,SAAS,CAAC,MAAd,8BADJ,cAEI,KAAC,OAAD,EAAS,OAAO,CAAElC,OAAlB,EAFJ,GAnDJ,GADJ,EArCJ,GADJ,CAkGH,CAzTD,CA2TA,GAAMsC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,QAAK,CAC9B5C,OAAO,CAAE4C,KAAK,CAACC,QAAN,CAAe7C,OADM,CAE9BC,gBAAgB,CAAE2C,KAAK,CAACC,QAAN,CAAe5C,gBAFH,CAG9BC,QAAQ,CAAE0C,KAAK,CAAC1C,QAAN,CAAe4C,KAHK,CAI9B3C,eAAe,CAAEyC,KAAK,CAACG,IAAN,CAAW5C,eAJE,CAK9BC,MAAM,CAAEwC,KAAK,CAACvC,OAAN,CAAcD,MALQ,CAM9BC,OAAO,CAAEuC,KAAK,CAACvC,OAAN,CAAcA,OANO,CAAL,EAA7B,CASA,cAAe7B,CAAAA,OAAO,CAACmE,eAAD,CAAkB,CACpClE,WAAW,CAAXA,WADoC,CAEpCC,oBAAoB,CAApBA,oBAFoC,CAGpCC,QAAQ,CAARA,QAHoC,CAIpCC,SAAS,CAATA,SAJoC,CAKpCC,SAAS,CAATA,SALoC,CAMpCC,cAAc,CAAdA,cANoC,CAOpCC,kBAAkB,CAAlBA,kBAPoC,CAQpCC,uBAAuB,CAAvBA,uBARoC,CASpCC,iBAAiB,CAAjBA,iBAToC,CAUpCC,oBAAoB,CAApBA,oBAVoC,CAWpCC,WAAW,CAAXA,WAXoC,CAYpCC,UAAU,CAAVA,UAZoC,CAapCC,aAAa,CAAbA,aAboC,CAcpCC,aAAa,CAAbA,aAdoC,CAepCC,aAAa,CAAbA,aAfoC,CAgBpCC,cAAc,CAAdA,cAhBoC,CAAlB,CAAP,CAiBZM,aAjBY,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { \r\n    get_product, \r\n    get_related_products \r\n} from '../actions/products';\r\nimport {\r\n    add_item,\r\n    get_items,\r\n    get_total,\r\n    get_item_total\r\n} from '../actions/cart';\r\nimport {\r\n    get_wishlist_items,\r\n    get_wishlist_item_total,\r\n    add_wishlist_item,\r\n    remove_wishlist_item,\r\n} from '../actions/wishlist';\r\nimport {\r\n    get_reviews,\r\n    get_review,\r\n    create_review,\r\n    update_review,\r\n    delete_review,\r\n    filter_reviews\r\n} from '../actions/reviews';\r\nimport Card from '../components/Card';\r\nimport ProductDetailCard from '../components/ProductDetailCard';\r\nimport LeaveReview from '../components/LeaveReview';\r\nimport Reviews from '../components/Reviews';\r\nimport Stars from '../components/Stars';\r\n\r\nconst ProductDetail = ({ \r\n    match, \r\n    product, \r\n    get_product,\r\n    related_products,\r\n    get_related_products,\r\n    add_item,\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n    wishlist,\r\n    get_wishlist_items,\r\n    get_wishlist_item_total,\r\n    add_wishlist_item,\r\n    remove_wishlist_item,\r\n    isAuthenticated,\r\n    review,\r\n    reviews,\r\n    get_reviews,\r\n    get_review,\r\n    create_review,\r\n    update_review,\r\n    delete_review,\r\n    filter_reviews\r\n}) => {\r\n    const [loginRedirect, setLoginRedirect] = useState(false);\r\n    const [redirect, setRedirect] = useState(false);\r\n\r\n    const [formData, setFormData] = useState({\r\n        comment: ''\r\n    });\r\n    const [rating, setRating] = useState(5.0);\r\n\r\n    const { comment } = formData;\r\n\r\n    useEffect(() => {\r\n        if (\r\n            isAuthenticated !== null &&\r\n            isAuthenticated !== undefined\r\n        ) {\r\n            if (\r\n                isAuthenticated &&\r\n                review &&\r\n                review !== null &&\r\n                review !== undefined &&\r\n                review.comment &&\r\n                review.comment !== null &&\r\n                review.comment !== undefined\r\n            ) {\r\n                setFormData({\r\n                    comment: review.comment\r\n                });\r\n            } else {\r\n                setFormData({\r\n                    comment: ''\r\n                });\r\n            }\r\n        }\r\n    }, [review, isAuthenticated]);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        const productId = match.params.id;\r\n\r\n        get_product(productId);\r\n        get_related_products(productId);\r\n    }, [match.params.id]);\r\n\r\n    useEffect(() => {\r\n        const productId = match.params.id;\r\n\r\n        get_reviews(productId);\r\n    }, [match.params.id]);\r\n\r\n    useEffect(() => {\r\n        const productId = match.params.id;\r\n\r\n        get_review(productId);\r\n    }, [match.params.id, isAuthenticated]);\r\n\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n    const requireLogin = e => {\r\n        e.preventDefault();\r\n\r\n        setLoginRedirect(true);\r\n    }\r\n\r\n    const leaveReview = e => {\r\n        e.preventDefault();\r\n\r\n        const productId = match.params.id;\r\n\r\n        if (rating !== null)\r\n            create_review(productId, rating, comment);\r\n    };\r\n\r\n    const updateReview = e => {\r\n        e.preventDefault();\r\n\r\n        const productId = match.params.id;\r\n\r\n        if (rating !== null)\r\n            update_review(productId, rating, comment);\r\n    };\r\n\r\n    const deleteReview = () => {\r\n        const productId = match.params.id;\r\n\r\n        const fetchData = async () => {\r\n            await delete_review(productId);\r\n            await get_review(productId);\r\n            setFormData({\r\n                comment: ''\r\n            });\r\n        };\r\n\r\n        fetchData();\r\n    };\r\n\r\n    const filterReviews = numStars => {\r\n        const productId = match.params.id;\r\n\r\n        filter_reviews(productId, numStars);\r\n    };\r\n\r\n    const getReviews = () => {\r\n        const productId = match.params.id;\r\n\r\n        get_reviews(productId);\r\n    };\r\n\r\n    const getRelatedProducts = () => {\r\n        if (\r\n            related_products &&\r\n            related_products !== null && \r\n            related_products !== undefined &&\r\n            related_products.length !== 0\r\n        ) {\r\n            return related_products.map((product, index) => (\r\n                <div key={index} className='col-4'>\r\n                    <Card\r\n                        product={product}\r\n                        add_item={add_item}\r\n                        get_items={get_items}\r\n                        get_total={get_total}\r\n                        get_item_total={get_item_total}\r\n                        wishlist={wishlist}\r\n                        get_wishlist_items={get_wishlist_items}\r\n                        get_wishlist_item_total={get_wishlist_item_total}\r\n                        add_wishlist_item={add_wishlist_item}\r\n                        remove_wishlist_item={remove_wishlist_item}\r\n                        isAuthenticated={isAuthenticated}\r\n                        setLoginRedirect={setLoginRedirect}\r\n                        setRedirect={setRedirect}\r\n                    />\r\n                </div>\r\n            ))\r\n        }\r\n    };\r\n\r\n    const getLeaveReviewComponent = () => {\r\n        if (isAuthenticated) {\r\n            if (\r\n                review &&\r\n                review !== null &&\r\n                review !== undefined &&\r\n                Object.keys(review).length === 0\r\n            ) {\r\n                return (\r\n                    <LeaveReview\r\n                        review={review}\r\n                        rating={rating}\r\n                        setRating={setRating}\r\n                        onSubmit={leaveReview}\r\n                        onChange={onChange}\r\n                        comment={comment}\r\n                    />\r\n                );\r\n            }\r\n            else if (\r\n                review &&\r\n                review !== null &&\r\n                review !== undefined &&\r\n                Object.keys(review).length !== 0\r\n            ) {\r\n                return (\r\n                    <LeaveReview\r\n                        review={review}\r\n                        rating={rating}\r\n                        setRating={setRating}\r\n                        onSubmit={updateReview}\r\n                        onChange={onChange}\r\n                        comment={comment}\r\n                        deleteReview={deleteReview}\r\n                    />\r\n                );\r\n            }\r\n        } else {\r\n            return (\r\n                <button\r\n                    className='btn btn-warning'\r\n                    onClick={requireLogin}\r\n                >\r\n                    Login to Leave a Review\r\n                </button>\r\n            );\r\n        }\r\n    };\r\n\r\n    if (loginRedirect)\r\n        return <Redirect to='/login' />;\r\n    if (redirect)\r\n        return <Redirect to='/cart-or-continue-shopping' />;\r\n\r\n    return (\r\n        <div className='container mt-5'>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <meta name=\"description\" content=\"Helmet application\" />\r\n                <title>Shop Time | Product Detail - {`${\r\n                    product &&\r\n                    product !== null &&\r\n                    product !== undefined &&\r\n                    product.name &&\r\n                    product.name !== null &&\r\n                    product.name !== undefined ? product.name : ''\r\n                }`}</title>\r\n                {/*<link rel=\"canonical\" href=\"http://mysite.com/example\" />*/}\r\n            </Helmet>\r\n            <ProductDetailCard\r\n                product={product}\r\n                add_item={add_item}\r\n                get_items={get_items}\r\n                get_total={get_total}\r\n                get_item_total={get_item_total}\r\n                setRedirect={setRedirect}\r\n                isAuthenticated={isAuthenticated}\r\n                setLoginRedirect={setLoginRedirect}\r\n                add_wishlist_item={add_wishlist_item}\r\n                get_wishlist_items={get_wishlist_items}\r\n                get_wishlist_item_total={get_wishlist_item_total}\r\n            />\r\n\r\n            <hr />\r\n\r\n            <section className='mt-5'>\r\n                <h2 className='mt-5'>Related Products:</h2>\r\n                <div className='row mt-5 ml-5 mr-5'>\r\n                    {getRelatedProducts()}\r\n                </div>\r\n            </section>\r\n\r\n            <section className='mt-5 mb-5'>\r\n                <div className='row'>\r\n                    <div className='col-3'>\r\n                        <h2 className='mb-3'>Filter Reviews</h2>\r\n                        <button\r\n                            className='btn btn-primary btn-sm mb-3'\r\n                            onClick={getReviews}\r\n                        >\r\n                            All\r\n                        </button>\r\n                        <div\r\n                            className='mb-1'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => filterReviews(5)}\r\n                        >\r\n                            <Stars rating={5.0} />\r\n                        </div>\r\n                        <div\r\n                            className='mb-1'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => filterReviews(4)}\r\n                        >\r\n                            <Stars rating={4.0} />\r\n                        </div>\r\n                        <div\r\n                            className='mb-1'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => filterReviews(3)}\r\n                        >\r\n                            <Stars rating={3.0} />\r\n                        </div>\r\n                        <div\r\n                            className='mb-1'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => filterReviews(2)}\r\n                        >\r\n                            <Stars rating={2.0} />\r\n                        </div>\r\n                        <div\r\n                            className='mb-3'\r\n                            style={{ cursor: 'pointer' }}\r\n                            onClick={() => filterReviews(1)}\r\n                        >\r\n                            <Stars rating={1.0} />\r\n                        </div>\r\n\r\n                        <h2>Leave a Review:</h2>\r\n                        <p className='mb-3'>\r\n                            Share your thoughts with other customers\r\n                        </p>\r\n                        {getLeaveReviewComponent()}\r\n                    </div>\r\n                    <div className='col-7 offset-2'>\r\n                        <h2 className='mb-5'>Customer Reviews</h2>\r\n                        <Reviews reviews={reviews} />\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    product: state.products.product,\r\n    related_products: state.products.related_products,\r\n    wishlist: state.wishlist.items,\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n    review: state.reviews.review,\r\n    reviews: state.reviews.reviews\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n    get_product,\r\n    get_related_products,\r\n    add_item,\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n    get_wishlist_items,\r\n    get_wishlist_item_total,\r\n    add_wishlist_item,\r\n    remove_wishlist_item,\r\n    get_reviews,\r\n    get_review,\r\n    create_review,\r\n    update_review,\r\n    delete_review,\r\n    filter_reviews\r\n})(ProductDetail);"]},"metadata":{},"sourceType":"module"}