{"ast":null,"code":"import _defineProperty from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/sale1/Desktop/SHOPTIME/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import{Helmet}from\"react-helmet\";import{Link}from'react-router-dom';import{connect}from'react-redux';import{get_items,get_total,get_item_total}from'../actions/cart';import{list_orders}from'../actions/orders';import{get_user_profile,update_user_profile}from'../actions/profile';import moment from'moment';import UserProfileForm from'../components/UserProfileForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(_ref){var get_items=_ref.get_items,get_total=_ref.get_total,get_item_total=_ref.get_item_total,list_orders=_ref.list_orders,orders=_ref.orders,user=_ref.user,profile=_ref.profile,get_user_profile=_ref.get_user_profile,update_user_profile=_ref.update_user_profile;var _useState=useState('user_info'),_useState2=_slicedToArray(_useState,2),display=_useState2[0],setDisplay=_useState2[1];var _useState3=useState({address_line_1:'',address_line_2:'',city:'',state_province_region:'',zipcode:'',phone:'',country_region:'Canada'}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var address_line_1=formData.address_line_1,address_line_2=formData.address_line_2,city=formData.city,state_province_region=formData.state_province_region,zipcode=formData.zipcode,phone=formData.phone,country_region=formData.country_region;var onChange=function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();update_user_profile(address_line_1,address_line_2,city,state_province_region,zipcode,phone,country_region);window.scrollTo(0,0);};useEffect(function(){get_user_profile();},[]);useEffect(function(){if(user){get_items();get_total();get_item_total();list_orders();}},[user]);useEffect(function(){if(profile&&profile!==null&&profile!==undefined){setFormData({address_line_1:profile.address_line_1,address_line_2:profile.address_line_2,city:profile.city,state_province_region:profile.state_province_region,zipcode:profile.zipcode,phone:profile.phone,country_region:profile.country_region});}},[profile]);var showStatus=function showStatus(status){if(status==='not_processed'){return'Not Processed';}else if(status==='processed'){return'Processed';}else if(status==='shipping'){return'Shipping';}else if(status==='delivered'){return'Delivered';}else if(status==='cancelled'){return'Cancelled';}};var userInfo=function userInfo(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-header\",children:\"User Information\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"First Name: \"}),user&&user!==null&&user!==undefined?user.first_name:/*#__PURE__*/_jsx(Fragment,{})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Name: \"}),user&&user!==null&&user!==undefined?user.last_name:/*#__PURE__*/_jsx(Fragment,{})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),user&&user!==null&&user!==undefined?user.email:/*#__PURE__*/_jsx(Fragment,{})]})]})]});};var purchaseHistory=function purchaseHistory(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-header\",children:\"Purchase History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:orders&&orders!==null&&orders!==undefined&&orders.map(function(order,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-3\",style:{color:'#b12704',fontSize:'24px'},children:[\"Order \",index+1]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group mb-3\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-muted mb-3\",style:{fontSize:'18px'},children:[\"Order Status: \",showStatus(order.status)]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-muted mb-3\",style:{fontSize:'18px'},children:\"Order Details:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group mb-3\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Transaction ID: \",order.transaction_id]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Total Cost of Order: $\",order.amount.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-muted mb-3\",style:{fontSize:'18px'},children:\"Additional Info:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group mb-3\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Shipping Price: $\",order.shipping_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Order Created: \",moment(order.date_issued).fromNow()]})]})]}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-info\",to:\"/dashboard/order-detail/\".concat(order.transaction_id),children:\"Order Details\"})]})})]},index);})})]});};var userProfile=function userProfile(){if(profile&&profile!==null&&profile!==undefined){return/*#__PURE__*/_jsx(UserProfileForm,{address_line_1:address_line_1,address_line_2:address_line_2,city:city,state_province_region:state_province_region,zipcode:zipcode,phone:phone,country_region:country_region,onChange:onChange,onSubmit:onSubmit,profile:profile});}else{return/*#__PURE__*/_jsx(Fragment,{});}};var renderData=function renderData(){if(display==='user_info'){return/*#__PURE__*/_jsx(Fragment,{children:userInfo()});}else if(display==='profile_info'){return/*#__PURE__*/_jsx(Fragment,{children:userProfile()});}else if(display==='purchase_history'){return/*#__PURE__*/_jsx(Fragment,{children:purchaseHistory()});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Helmet application\"}),/*#__PURE__*/_jsx(\"title\",{children:\"Shop Time | Dashboard\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-header\",children:\"Dashboard Links\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",style:{cursor:'pointer'},onClick:function onClick(){return setDisplay('user_info');},children:display==='user_info'?/*#__PURE__*/_jsx(\"strong\",{children:\"User Info\"}):/*#__PURE__*/_jsx(Fragment,{children:\"User Info\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",style:{cursor:'pointer'},onClick:function onClick(){return setDisplay('profile_info');},children:display==='profile_info'?/*#__PURE__*/_jsx(\"strong\",{children:\"User Profile\"}):/*#__PURE__*/_jsx(Fragment,{children:\"User Profile\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",style:{cursor:'pointer'},onClick:function onClick(){return setDisplay('purchase_history');},children:display==='purchase_history'?/*#__PURE__*/_jsx(\"strong\",{children:\"Purchase History\"}):/*#__PURE__*/_jsx(Fragment,{children:\"Purchase History\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:renderData()})]})]});};var mapStateToProps=function mapStateToProps(state){return{orders:state.orders.orders,user:state.auth.user,profile:state.profile.profile};};export default connect(mapStateToProps,{get_items:get_items,get_total:get_total,get_item_total:get_item_total,list_orders:list_orders,get_user_profile:get_user_profile,update_user_profile:update_user_profile})(Dashboard);","map":{"version":3,"sources":["C:/Users/sale1/Desktop/SHOPTIME/src/containers/Dashboard.js"],"names":["React","Fragment","useState","useEffect","Helmet","Link","connect","get_items","get_total","get_item_total","list_orders","get_user_profile","update_user_profile","moment","UserProfileForm","Dashboard","orders","user","profile","display","setDisplay","address_line_1","address_line_2","city","state_province_region","zipcode","phone","country_region","formData","setFormData","onChange","e","target","name","value","onSubmit","preventDefault","window","scrollTo","undefined","showStatus","status","userInfo","first_name","last_name","email","purchaseHistory","map","order","index","color","fontSize","transaction_id","amount","toFixed","shipping_price","date_issued","fromNow","userProfile","renderData","cursor","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n} from '../actions/cart';\r\nimport { list_orders } from '../actions/orders';\r\nimport {\r\n    get_user_profile,\r\n    update_user_profile,\r\n} from '../actions/profile';\r\nimport moment from 'moment';\r\nimport UserProfileForm from '../components/UserProfileForm';\r\n\r\nconst Dashboard = ({\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n    list_orders,\r\n    orders,\r\n    user,\r\n    profile,\r\n    get_user_profile,\r\n    update_user_profile,\r\n}) => {\r\n    const [display, setDisplay] = useState('user_info');\r\n    const [formData, setFormData] = useState({\r\n        address_line_1: '',\r\n        address_line_2: '',\r\n        city: '',\r\n        state_province_region: '',\r\n        zipcode: '',\r\n        phone: '',\r\n        country_region: 'Canada'\r\n    });\r\n\r\n    const {\r\n        address_line_1,\r\n        address_line_2,\r\n        city,\r\n        state_province_region,\r\n        zipcode,\r\n        phone,\r\n        country_region\r\n    } = formData;\r\n\r\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        update_user_profile(\r\n            address_line_1,\r\n            address_line_2,\r\n            city,\r\n            state_province_region,\r\n            zipcode,\r\n            phone,\r\n            country_region\r\n        );\r\n\r\n        window.scrollTo(0, 0);\r\n    };\r\n\r\n    useEffect(() => {\r\n        get_user_profile();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            get_items();\r\n            get_total();\r\n            get_item_total();\r\n            list_orders();\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        if (profile && profile !== null && profile !== undefined) {\r\n            setFormData({\r\n                address_line_1: profile.address_line_1,\r\n                address_line_2: profile.address_line_2,\r\n                city: profile.city,\r\n                state_province_region: profile.state_province_region,\r\n                zipcode: profile.zipcode,\r\n                phone: profile.phone,\r\n                country_region: profile.country_region\r\n            });\r\n        }\r\n    }, [profile]);\r\n\r\n    const showStatus = (status) => {\r\n        if (status === 'not_processed') {\r\n            return 'Not Processed';\r\n        }\r\n        else if (status === 'processed') {\r\n            return 'Processed';\r\n        }\r\n        else if (status === 'shipping') {\r\n            return 'Shipping';\r\n        }\r\n        else if (status === 'delivered') {\r\n            return 'Delivered';\r\n        }\r\n        else if (status === 'cancelled') {\r\n            return 'Cancelled';\r\n        }\r\n    };  \r\n\r\n    const userInfo = () => {\r\n        return (\r\n            <div className='card mb-5'>\r\n                <h3 className='card-header'>User Information</h3>\r\n                <ul className='list-group'>\r\n                    <li className='list-group-item'>\r\n                        <strong>First Name: </strong>\r\n                        {\r\n                            user && \r\n                            user !== null &&\r\n                            user !== undefined ?\r\n                            user.first_name : <Fragment></Fragment>\r\n                        }\r\n                    </li>\r\n                    <li className='list-group-item'>\r\n                        <strong>Last Name: </strong>\r\n                        {\r\n                            user && \r\n                            user !== null &&\r\n                            user !== undefined ?\r\n                            user.last_name : <Fragment></Fragment>\r\n                        }\r\n                    </li>\r\n                    <li className='list-group-item'>\r\n                        <strong>Email: </strong>\r\n                        {\r\n                            user && \r\n                            user !== null &&\r\n                            user !== undefined ?\r\n                            user.email : <Fragment></Fragment>\r\n                        }\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const purchaseHistory = () => {\r\n        return (\r\n            <div className='card mb-5'>\r\n                <h3 className='card-header'>\r\n                    Purchase History\r\n                </h3>\r\n                <div className='card-body'>\r\n                    {\r\n                        orders &&\r\n                        orders !== null && \r\n                        orders !== undefined &&\r\n                        orders.map((order, index) => (\r\n                            <div key={index}>\r\n                                <h3\r\n                                    className='mb-3'\r\n                                    style={{\r\n                                        color: '#b12704',\r\n                                        fontSize: '24px'\r\n                                    }}\r\n                                >\r\n                                    Order {index + 1}\r\n                                </h3>\r\n                                <ul className='list-group mb-3'>\r\n                                    <li className='list-group-item'>\r\n                                        <div>\r\n                                            <h3\r\n                                                className='text-muted mb-3'\r\n                                                style={{\r\n                                                    fontSize: '18px'\r\n                                                }}\r\n                                            >\r\n                                                Order Status: {showStatus(order.status)}\r\n                                            </h3>\r\n                                            <h3\r\n                                                className='text-muted mb-3'\r\n                                                style={{\r\n                                                    fontSize: '18px'\r\n                                                }}\r\n                                            >\r\n                                                Order Details:\r\n                                            </h3>\r\n                                            <ul className='list-group mb-3'>\r\n                                                <li className='list-group-item'>\r\n                                                    Transaction ID: {order.transaction_id}\r\n                                                </li>\r\n                                                <li className='list-group-item'>\r\n                                                    Total Cost of Order: ${order.amount.toFixed(2)}\r\n                                                </li>\r\n                                            </ul>\r\n                                            <h3\r\n                                                className='text-muted mb-3'\r\n                                                style={{\r\n                                                    fontSize: '18px'\r\n                                                }}\r\n                                            >\r\n                                                Additional Info:\r\n                                            </h3>\r\n                                            <ul className='list-group mb-3'>\r\n                                                <li className='list-group-item'>\r\n                                                    Shipping Price: ${order.shipping_price.toFixed(2)}\r\n                                                </li>\r\n                                                <li className='list-group-item'>\r\n                                                    Order Created: {moment(order.date_issued).fromNow()}\r\n                                                </li>\r\n                                            </ul>\r\n                                        </div>\r\n                                        <Link\r\n                                            className='btn btn-info'\r\n                                            to={`/dashboard/order-detail/${order.transaction_id}`}\r\n                                        >\r\n                                            Order Details\r\n                                        </Link>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const userProfile = () => {\r\n        if (profile && profile !== null && profile !== undefined) {\r\n            return (\r\n                <UserProfileForm\r\n                    address_line_1={address_line_1}\r\n                    address_line_2={address_line_2}\r\n                    city={city}\r\n                    state_province_region={state_province_region}\r\n                    zipcode={zipcode}\r\n                    phone={phone}\r\n                    country_region={country_region}\r\n                    onChange={onChange}\r\n                    onSubmit={onSubmit}\r\n                    profile={profile}\r\n                />\r\n            );\r\n        } else {\r\n            return (\r\n                <Fragment></Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderData = () => {\r\n        if (display === 'user_info') {\r\n            return (\r\n                <Fragment>\r\n                    {userInfo()}\r\n                </Fragment>\r\n            );\r\n        }\r\n        else if (display === 'profile_info') {\r\n            return (\r\n                <Fragment>\r\n                    {userProfile()}\r\n                </Fragment>\r\n            )\r\n        }\r\n        else if (display === 'purchase_history') {\r\n            return (\r\n                <Fragment>\r\n                    {purchaseHistory()}\r\n                </Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='container mt-5'>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <meta name=\"description\" content=\"Helmet application\" />\r\n                <title>Shop Time | Dashboard</title>\r\n                {/*<link rel=\"canonical\" href=\"http://mysite.com/example\" />*/}\r\n            </Helmet>\r\n            <div className='row'>\r\n                <div className='col-3'>\r\n                    <div className='card'>\r\n                        <h3 className='card-header'>\r\n                            Dashboard Links\r\n                        </h3>\r\n                        <ul className='list-group'>\r\n                            <li \r\n                                className='list-group-item'\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => setDisplay('user_info')}\r\n                            >\r\n                                {\r\n                                    display === 'user_info' ? (\r\n                                        <strong>User Info</strong>\r\n                                    ) : (\r\n                                        <Fragment>User Info</Fragment>\r\n                                    )\r\n                                }\r\n                            </li>\r\n                            <li \r\n                                className='list-group-item'\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => setDisplay('profile_info')}\r\n                            >\r\n                                {\r\n                                    display === 'profile_info' ? (\r\n                                        <strong>User Profile</strong>\r\n                                    ) : (\r\n                                        <Fragment>User Profile</Fragment>\r\n                                    )\r\n                                }\r\n                            </li>\r\n                            <li \r\n                                className='list-group-item'\r\n                                style={{ cursor: 'pointer' }}\r\n                                onClick={() => setDisplay('purchase_history')}\r\n                            >\r\n                                {\r\n                                    display === 'purchase_history' ? (\r\n                                        <strong>Purchase History</strong>\r\n                                    ) : (\r\n                                        <Fragment>Purchase History</Fragment>\r\n                                    )\r\n                                }\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div className='col-9'>\r\n                    {renderData()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    orders: state.orders.orders,\r\n    user: state.auth.user,\r\n    profile: state.profile.profile,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n    get_items,\r\n    get_total,\r\n    get_item_total,\r\n    list_orders,\r\n    get_user_profile,\r\n    update_user_profile,\r\n})(Dashboard);"]},"metadata":{},"sourceType":"module"}